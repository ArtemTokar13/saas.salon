{% load static %}
<nav class="fixed inset-x-0 top-0 z-50">
  <div class="backdrop-blur-sm bg-white/10 shadow-md">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center gap-3">
          <!-- Inline logo: два горизонтальних прямокутника (зелений + червоний) -->
          <a href="" class="flex items-center gap-3">
            <img class="w-14" src="{% static 'img/logo.png' %}" alt="Logo">

            <!-- Brand name: червоний, приємний тон -->
            <span class="text-red-600 font-semibold text-lg sm:text-xl leading-none select-none">
              ReservaYa
            </span>
          </a>
        </div>

        <!-- CENTER: Desktop menu -->
        <div class="hidden md:flex md:items-center md:space-x-6">
          <!-- Solutions - dropdown -->
          <div class="relative" x-data>
            <button type="button"
                    class="inline-flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-red-600 focus:outline-none"
                    aria-expanded="false"
                    onclick="toggleDropdown(event, 'solutions-dropdown')">
              Solutions
              <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>

            <div id="solutions-dropdown" class="hidden absolute mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black/5">
              <div class="py-1">
                <a href="" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Booking & Calendar</a>
                <a href="" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Client Management</a>
                <a href="" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Payments & Invoicing</a>
              </div>
            </div>
          </div>

          <!-- Pricing (plain link) -->
          <a href="" class="text-sm font-medium text-gray-500 hover:text-red-600">Pricing</a>

          <!-- Help - dropdown -->
          <div class="relative">
            <button type="button"
                    class="inline-flex items-center gap-2 text-sm font-medium text-gray-500 hover:text-red-600 focus:outline-none"
                    onclick="toggleDropdown(event, 'help-dropdown')">
              Help
              <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>

            <div id="help-dropdown" class="hidden absolute mt-2 w-44 rounded-md shadow-lg bg-white ring-1 ring-black/5">
              <div class="py-1">
                <a href="" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Docs</a>
                <a href="" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">FAQ</a>
                <a href="" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">Contact</a>
              </div>
            </div>
          </div>
        </div>

        <!-- RIGHT: Auth + Language (desktop) -->
        <div class="hidden md:flex md:items-center md:gap-4">
          {% if user.is_authenticated %}
            <a href="" class="text-sm font-medium text-gray-500 hover:text-red-600">Dashboard</a>
            <form method="post" action="" class="inline">
              {% csrf_token %}
              <button type="submit" class="text-sm font-medium text-gray-500 hover:text-red-600">Logout</button>
            </form>
          {% else %}
            <a href="" class="text-sm font-medium text-gray-500 hover:text-red-600">Login</a>
            <a href="" class="ml-2 px-3 py-1 rounded-md bg-red-600 text-white text-sm font-semibold hover:bg-red-700">Register</a>
          {% endif %}

          <!-- Language selector -->
          <div class="relative">
            <button onclick="toggleDropdown(event, 'lang-dropdown')" class="ml-3 text-sm font-medium text-gray-500 hover:text-red-600 focus:outline-none">
              {{ request.LANGUAGE_CODE|default:'es'|upper }}
            </button>
            <div id="lang-dropdown" class="hidden absolute right-0 mt-2 w-36 rounded-md shadow-lg bg-white ring-1 ring-black/5">
              <div class="py-1">
                <form method="post" action="" class="px-3 py-1">
                  {% csrf_token %}
                  <button name="language" value="es" class="w-full text-left px-2 py-1 text-sm text-gray-700 hover:bg-gray-50">Español</button>
                  <button name="language" value="ca" class="w-full text-left px-2 py-1 text-sm text-gray-700 hover:bg-gray-50">Valencià</button>
                  <button name="language" value="en" class="w-full text-left px-2 py-1 text-sm text-gray-700 hover:bg-gray-50">English</button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- MOBILE: burger -->
        <div class="md:hidden flex items-center">
          <button id="nav-toggle" class="text-white sm:hidden">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- MOBILE MENU: hidden by default -->
    <div id="mobile-menu" class="md:hidden hidden px-4 pb-4">
      <div class="space-y-2">
        <a href="" class="block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-white/5">Solutions</a>
        <a href="" class="block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-white/5">Pricing</a>
        <a href="" class="block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-white/5">Help</a>

        <div class="border-t border-white/5"></div>

        {% if user.is_authenticated %}
          <a href="" class="block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-white/5">Dashboard</a>
          <form method="post" action="" class="px-3">
            {% csrf_token %}
            <button type="submit" class="w-full text-left px-3 py-2 text-base text-gray-200 hover:bg-white/5">Logout</button>
          </form>
        {% else %}
          <a href="" class="block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-white/5">Login</a>
          <a href="" class="block px-3 py-2 rounded-md text-base font-semibold bg-red-600 text-white hover:bg-red-700">Register</a>
        {% endif %}

        <!-- Mobile language buttons -->
        <div class="flex gap-2 px-3">
          <form method="post" action="" class="flex gap-2">
            {% csrf_token %}
            <button name="language" value="es" class="px-3 py-1 rounded-md text-sm bg-white/5">ES</button>
            <button name="language" value="ca" class="px-3 py-1 rounded-md text-sm bg-white/5">CA</button>
            <button name="language" value="en" class="px-3 py-1 rounded-md text-sm bg-white/5">EN</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Minimal JS for toggles (put at end of body or in a small static file) -->
<script>
  function toggleDropdown(event, id) {
    event.stopPropagation();
    const el = document.getElementById(id);
    if (!el) return;
    const isHidden = el.classList.contains('hidden');
    // hide all dropdowns first
    document.querySelectorAll('[id$="-dropdown"]').forEach(d => d.classList.add('hidden'));
    if (isHidden) {
      el.classList.remove('hidden');
    } else {
      el.classList.add('hidden');
    }
  }

  // click outside to close
  document.addEventListener('click', function () {
    document.querySelectorAll('[id$="-dropdown"]').forEach(d => d.classList.add('hidden'));
  });

  // mobile menu
  function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const openIcon = document.getElementById('burger-open');
    const closeIcon = document.getElementById('burger-close');
    if (!menu) return;
    const isHidden = menu.classList.contains('hidden');
    if (isHidden) {
      menu.classList.remove('hidden');
      openIcon.classList.add('hidden');
      closeIcon.classList.remove('hidden');
    } else {
      menu.classList.add('hidden');
      openIcon.classList.remove('hidden');
      closeIcon.classList.add('hidden');
    }
  }
</script>